"use strict";(()=>{var re=Object.create;var B=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty;var ce=(e,o,t)=>o in e?B(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var A=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var he=(e,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of ne(o))!ae.call(e,r)&&r!==t&&B(e,r,{get:()=>o[r],enumerable:!(s=se(o,r))||s.enumerable});return e};var le=(e,o,t)=>(t=e!=null?re(ie(e)):{},he(o||!e||!e.__esModule?B(t,"default",{value:e,enumerable:!0}):t,e));var f=(e,o,t)=>ce(e,typeof o!="symbol"?o+"":o,t);var $=A((exports,module)=>{(function(){"use strict";var root=typeof window=="object"?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(o){return new Sha1(!0).update(o)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(s){return e.create().update(s)};for(var o=0;o<OUTPUT_TYPES.length;++o){var t=OUTPUT_TYPES[o];e[t]=createOutputMethod(t)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if(typeof e=="string")return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(e.length===void 0)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var o=typeof e!="string";o&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var t,s=0,r,i=e.length||0,n=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),o)for(r=this.start;s<i&&r<64;++s)n[r>>2]|=e[s]<<SHIFT[r++&3];else for(r=this.start;s<i&&r<64;++s)t=e.charCodeAt(s),t<128?n[r>>2]|=t<<SHIFT[r++&3]:t<2048?(n[r>>2]|=(192|t>>6)<<SHIFT[r++&3],n[r>>2]|=(128|t&63)<<SHIFT[r++&3]):t<55296||t>=57344?(n[r>>2]|=(224|t>>12)<<SHIFT[r++&3],n[r>>2]|=(128|t>>6&63)<<SHIFT[r++&3],n[r>>2]|=(128|t&63)<<SHIFT[r++&3]):(t=65536+((t&1023)<<10|e.charCodeAt(++s)&1023),n[r>>2]|=(240|t>>18)<<SHIFT[r++&3],n[r>>2]|=(128|t>>12&63)<<SHIFT[r++&3],n[r>>2]|=(128|t>>6&63)<<SHIFT[r++&3],n[r>>2]|=(128|t&63)<<SHIFT[r++&3]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=n[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,o=this.lastByteIndex;e[16]=this.block,e[o>>2]|=EXTRA[o&3],this.block=e[16],o>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e=this.h0,o=this.h1,t=this.h2,s=this.h3,r=this.h4,i,n,a,h=this.blocks;for(n=16;n<80;++n)a=h[n-3]^h[n-8]^h[n-14]^h[n-16],h[n]=a<<1|a>>>31;for(n=0;n<20;n+=5)i=o&t|~o&s,a=e<<5|e>>>27,r=a+i+r+1518500249+h[n]<<0,o=o<<30|o>>>2,i=e&o|~e&t,a=r<<5|r>>>27,s=a+i+s+1518500249+h[n+1]<<0,e=e<<30|e>>>2,i=r&e|~r&o,a=s<<5|s>>>27,t=a+i+t+1518500249+h[n+2]<<0,r=r<<30|r>>>2,i=s&r|~s&e,a=t<<5|t>>>27,o=a+i+o+1518500249+h[n+3]<<0,s=s<<30|s>>>2,i=t&s|~t&r,a=o<<5|o>>>27,e=a+i+e+1518500249+h[n+4]<<0,t=t<<30|t>>>2;for(;n<40;n+=5)i=o^t^s,a=e<<5|e>>>27,r=a+i+r+1859775393+h[n]<<0,o=o<<30|o>>>2,i=e^o^t,a=r<<5|r>>>27,s=a+i+s+1859775393+h[n+1]<<0,e=e<<30|e>>>2,i=r^e^o,a=s<<5|s>>>27,t=a+i+t+1859775393+h[n+2]<<0,r=r<<30|r>>>2,i=s^r^e,a=t<<5|t>>>27,o=a+i+o+1859775393+h[n+3]<<0,s=s<<30|s>>>2,i=t^s^r,a=o<<5|o>>>27,e=a+i+e+1859775393+h[n+4]<<0,t=t<<30|t>>>2;for(;n<60;n+=5)i=o&t|o&s|t&s,a=e<<5|e>>>27,r=a+i+r-1894007588+h[n]<<0,o=o<<30|o>>>2,i=e&o|e&t|o&t,a=r<<5|r>>>27,s=a+i+s-1894007588+h[n+1]<<0,e=e<<30|e>>>2,i=r&e|r&o|e&o,a=s<<5|s>>>27,t=a+i+t-1894007588+h[n+2]<<0,r=r<<30|r>>>2,i=s&r|s&e|r&e,a=t<<5|t>>>27,o=a+i+o-1894007588+h[n+3]<<0,s=s<<30|s>>>2,i=t&s|t&r|s&r,a=o<<5|o>>>27,e=a+i+e-1894007588+h[n+4]<<0,t=t<<30|t>>>2;for(;n<80;n+=5)i=o^t^s,a=e<<5|e>>>27,r=a+i+r-899497514+h[n]<<0,o=o<<30|o>>>2,i=e^o^t,a=r<<5|r>>>27,s=a+i+s-899497514+h[n+1]<<0,e=e<<30|e>>>2,i=r^e^o,a=s<<5|s>>>27,t=a+i+t-899497514+h[n+2]<<0,r=r<<30|r>>>2,i=s^r^e,a=t<<5|t>>>27,o=a+i+o-899497514+h[n+3]<<0,s=s<<30|s>>>2,i=t^s^r,a=o<<5|o>>>27,e=a+i+e-899497514+h[n+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+e<<0,this.h1=this.h1+o<<0,this.h2=this.h2+t<<0,this.h3=this.h3+s<<0,this.h4=this.h4+r<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,o=this.h1,t=this.h2,s=this.h3,r=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,o=this.h1,t=this.h2,s=this.h3,r=this.h4;return[e>>24&255,e>>16&255,e>>8&255,e&255,o>>24&255,o>>16&255,o>>8&255,o&255,t>>24&255,t>>16&255,t>>8&255,t&255,s>>24&255,s>>16&255,s>>8&255,s&255,r>>24&255,r>>16&255,r>>8&255,r&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),o=new DataView(e);return o.setUint32(0,this.h0),o.setUint32(4,this.h1),o.setUint32(8,this.h2),o.setUint32(12,this.h3),o.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&define(function(){return exports}))})()});var V=A((Te,W)=>{var x=1e3,m=x*60,w=m*60,C=w*24,pe=C*7,be=C*365.25;W.exports=function(e,o){o=o||{};var t=typeof e;if(t==="string"&&e.length>0)return ge(e);if(t==="number"&&isFinite(e))return o.long?Fe(e):Ce(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ge(e){if(e=String(e),!(e.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var t=parseFloat(o[1]),s=(o[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*be;case"weeks":case"week":case"w":return t*pe;case"days":case"day":case"d":return t*C;case"hours":case"hour":case"hrs":case"hr":case"h":return t*w;case"minutes":case"minute":case"mins":case"min":case"m":return t*m;case"seconds":case"second":case"secs":case"sec":case"s":return t*x;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ce(e){var o=Math.abs(e);return o>=C?Math.round(e/C)+"d":o>=w?Math.round(e/w)+"h":o>=m?Math.round(e/m)+"m":o>=x?Math.round(e/x)+"s":e+"ms"}function Fe(e){var o=Math.abs(e);return o>=C?X(e,o,C,"day"):o>=w?X(e,o,w,"hour"):o>=m?X(e,o,m,"minute"):o>=x?X(e,o,x,"second"):e+" ms"}function X(e,o,t,s){var r=o>=t*1.5;return Math.round(e/t)+" "+s+(r?"s":"")}});var K=A((Pe,Y)=>{function xe(e){t.debug=t,t.default=t,t.coerce=h,t.disable=i,t.enable=r,t.enabled=n,t.humanize=V(),t.destroy=T,Object.keys(e).forEach(c=>{t[c]=e[c]}),t.names=[],t.skips=[],t.formatters={};function o(c){let l=0;for(let u=0;u<c.length;u++)l=(l<<5)-l+c.charCodeAt(u),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=o;function t(c){let l,u=null,F,v;function b(...d){if(!b.enabled)return;let g=b,H=Number(new Date),ee=H-(l||H);g.diff=ee,g.prev=l,g.curr=H,l=H,d[0]=t.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let E=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(P,te)=>{if(P==="%%")return"%";E++;let J=t.formatters[te];if(typeof J=="function"){let oe=d[E];P=J.call(g,oe),d.splice(E,1),E--}return P}),t.formatArgs.call(g,d),(g.log||t.log).apply(g,d)}return b.namespace=c,b.useColors=t.useColors(),b.color=t.selectColor(c),b.extend=s,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(F!==t.namespaces&&(F=t.namespaces,v=t.enabled(c)),v),set:d=>{u=d}}),typeof t.init=="function"&&t.init(b),b}function s(c,l){let u=t(this.namespace+(typeof l>"u"?":":l)+c);return u.log=this.log,u}function r(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let l,u=(typeof c=="string"?c:"").split(/[\s,]+/),F=u.length;for(l=0;l<F;l++)u[l]&&(c=u[l].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...t.names.map(a),...t.skips.map(a).map(l=>"-"+l)].join(",");return t.enable(""),c}function n(c){if(c[c.length-1]==="*")return!0;let l,u;for(l=0,u=t.skips.length;l<u;l++)if(t.skips[l].test(c))return!1;for(l=0,u=t.names.length;l<u;l++)if(t.names[l].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function h(c){return c instanceof Error?c.stack||c.message:c}function T(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Y.exports=xe});var Z=A((p,O)=>{p.formatArgs=we;p.save=Se;p.load=_e;p.useColors=me;p.storage=ye();p.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function me(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function we(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+O.exports.humanize(this.diff),!this.useColors)return;let o="color: "+this.color;e.splice(1,0,o,"color: inherit");let t=0,s=0;e[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(t++,r==="%c"&&(s=t))}),e.splice(s,0,o)}p.log=console.debug||console.log||(()=>{});function Se(e){try{e?p.storage.setItem("debug",e):p.storage.removeItem("debug")}catch{}}function _e(){let e;try{e=p.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function ye(){try{return localStorage}catch{}}O.exports=K()(p);var{formatters:ve}=O.exports;ve.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}});var k=null,L=()=>{if(k!==null)return k;let e=`(${ue.join("|")})`,o=new RegExp(e,"i");if(!navigator||!navigator.userAgent)return!1;let t=navigator.userAgent;return k=o.test(t),k},ue=["APIs-Google","AdsBot-Google","Googlebot","FeedFetcher-Google","Google-Read-Aloud","DuplexWeb-Google","Google Favicon","yandex.com/bots","StackRambler","Yahoo! Slurp","search.msn.com/msnbot.htm","Konqueror","googlebot/","Googlebot-Mobile","Googlebot-Image","Google favicon","Mediapartners-Google","bingbot","slurp","java","wget","curl","Commons-HttpClient","Python-urllib","libwww","httpunit","nutch","phpcrawl","msnbot","jyxobot","FAST-WebCrawler","FAST Enterprise Crawler","biglotron","teoma","convera","seekbot","gigablast","exabot","ngbot","ia_archiver","GingerCrawler","webmon ","httrack","webcrawler","grub.org","UsineNouvelleCrawler","antibot","netresearchserver","speedy","fluffy","bibnum.bnf","findlink","msrbot","panscient","yacybot","AISearchBot","IOI","ips-agent","tagoobot","MJ12bot","dotbot","woriobot","yanga","buzzbot","mlbot","yandexbot","purebot","Linguee Bot","Voyager","CyberPatrol","voilabot","baiduspider","citeseerxbot","spbot","twengabot","postrank","turnitinbot","scribdbot","page2rss","sitebot","linkdex","Adidxbot","blekkobot","ezooms","dotbot","Mail.RU_Bot","discobot","heritrix","findthatfile","europarchive.org","NerdByNature.Bot","sistrix crawler","ahrefsbot","Aboundex","domaincrawler","wbsearchbot","summify","ccbot","edisterbot","seznambot","ec2linkfinder","gslfbot","aihitbot","intelium_bot","facebookexternalhit","yeti","RetrevoPageAnalyzer","lb-spider","sogou","lssbot","careerbot","wotbox","wocbot","ichiro","DuckDuckBot","lssrocketcrawler","drupact","webcompanycrawler","acoonbot","openindexspider","gnam gnam spider","web-archive-net.com.bot","backlinkcrawler","coccoc","integromedb","content crawler spider","toplistbot","seokicks-robot","it2media-domain-crawler","ip-web-crawler.com","siteexplorer.info","elisabot","proximic","changedetection","blexbot","arabot","WeSEE:Search","niki-bot","CrystalSemanticsBot","rogerbot","360Spider","psbot","InterfaxScanBot","Lipperhey SEO Service","CC Metadata Scaper","g00g1e.net","GrapeshotCrawler","urlappendbot","brainobot","fr-crawler","binlar","SimpleCrawler","Livelapbot","Twitterbot","cXensebot","smtbot","bnf.fr_bot","A6-Indexer","ADmantX","Facebot","Twitterbot","OrangeBot","memorybot","AdvBot","MegaIndex","SemanticScholarBot","ltx71","nerdybot","xovibot","BUbiNG","Qwantify","archive.org_bot","Applebot","TweetmemeBot","crawler4j","findxbot","SemrushBot","yoozBot","lipperhey","y!j-asr","Domain Re-Animator Bot","AddThis"];var G={AUTH_EVENT:"auth_session"},_=1;var z=le($());var q=e=>new Promise((o,t)=>{let s=new XMLHttpRequest;s.onreadystatechange=()=>{if(s.readyState===4)if(s.status===200){let r=JSON.parse(s.response);o(r)}else t(new Error(`Newtwork GET error, url: ${e}, status: ${s.status}`))},s.onerror=()=>{t(new Error(`Newtwork GET error, url: ${e}`))},s.open("GET",e,!0),s.send()}),I=(e,o={})=>new Promise((t,s)=>{let r=new XMLHttpRequest;r.onreadystatechange=()=>{if(r.readyState===4)if(r.status===200){let i=JSON.parse(r.response);t(i)}else s(new Error(`Newtwork POST error, url: ${e}, status: ${r.status}`))},r.onerror=()=>{s(new Error(`Newtwork POST error, url: ${e}`))},r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(o))}),N=()=>{let e=window?.mcwidget?.host||"manychat.com";return window.__MCHT_BACKEND_PATH__||`https://${e}`},M=null,R=()=>{if(M)return M;let{navigator:e={},screen:o={}}=window,{language:t="",userLanguage:s="",userAgent:r="",mimeTypes:i=[],plugins:n=[]}=e,{width:a=0,height:h=0,pixelDepth:T=0}=o,c=t||s||"no",l=r.replace(/\D+/g,""),u=i.length,F=n.length,v=`${h}${a}${T}`,d=[c,u,l,F,v].join(".");return M=d,d};var de=e=>{let o=Date.now().toString(),t=Math.random()*Math.random()*Math.random()*Math.random(),s=R(),r=[e,o,t,s].join("_");return(0,z.default)(r)},j=(e,o)=>({sessionId:de(e),hasOptedIn:!1,pageId:e,token:o,custom:{}});var D=class{constructor(){f(this,"get",(o,t=null)=>{if(this.hasLocalStorage)try{let s=window.localStorage.getItem(o);return s?JSON.parse(s):t}catch(s){console.error(s)}else{let s=this.emulatedStorage[o];return s===void 0?t:s}});f(this,"set",(o,t)=>{if(this.hasLocalStorage)try{let s=JSON.stringify(t);window.localStorage.setItem(o,s)}catch(s){console.error(s)}else this.emulatedStorage[o]=t});f(this,"remove",o=>{if(this.hasLocalStorage)try{window.localStorage.removeItem(o)}catch(t){console.error(t)}else this.emulatedStorage[o]=void 0});this.emulatedStorage={},this.hasLocalStorage=fe()}},fe=()=>{let{localStorage:e}=window;if(!e)return!1;let o="mc_test_local_storage",t={example:"EX"};try{e.setItem(o,JSON.stringify(t));let s=JSON.parse(e.getItem(o));return e.removeItem(o),s.example===t.example}catch{return!1}};var S=Z()("mcpixel"),y=class e{constructor(o){f(this,"updateSessionData",o=>{this.sessionData=o,this.storage.set("mc_pixel_session_data",this.sessionData)});f(this,"setCustomSessionData",(o,t)=>{let{custom:s={}}=this.sessionData;this.updateSessionData({...this.sessionData,custom:{...s,[o]:t}})});f(this,"getCustomSessionData",(o,t=null)=>{let{custom:s={}}=this.sessionData,r=s[o];return r===void 0?t:r});f(this,"checkOptIn",()=>new Promise((o,t)=>{this.hasOptedIn&&o(!0);let r=`${N()}/pixel/checkOptin?account_id=${this.pageId}&session_id=${this.sessionId}`;q(r).then(({has_opted_in:i})=>{this.hasOptedIn=i,S("Check OptIn:",{hasOptedIn:i}),o(i)},t)}));f(this,"_validatePixelEvent",o=>this.token?Q(this.token)?"Token expired!":o?this.accountId?null:"Account id is required to fire event!":"Event is required to fire event!":"Token is required to fire event!");f(this,"fireLogConversionEvent",o=>{let t=this._validatePixelEvent(o);return t?new Error(t):new Promise((s,r)=>{I(U("logConversionEvent"),{event:o,account_id:this.accountId,token:this.token}).then(i=>{S("Fire event success:",{appId:_,event:o}),s(i)},r)})});f(this,"fireLogMoneyEvent",(o,t,s="USD")=>{let r=this._validatePixelEvent(o);return r?new Error(r):t?new Promise((i,n)=>{I(U("logMoneyEvent"),{event:o,account_id:this.accountId,weight:t,currency:s,token:this.token}).then(a=>{S("Fire event success:",{appId:_,event:o,weight:t,currency:s}),i(a)},n)}):new Error("Weight is required to fire event!")});f(this,"fireEvent",(o,t,s=null,{sessionData:r=null,externalId:i=null}={})=>o?t?new Promise((n,a)=>{I(U("logEvent"),{app_id:o,account_id:this.pageId,payload:s,event:t,session_id:this.sessionId,session_data:r,external_id:i,b:L()}).then(h=>{S("Fire event success:",{appId:o,event:t,payload:s,sessionData:r,externalId:i}),n(h)},a)}):new Error("Event is required to fire event!"):new Error("App Id is required to fire event!"));if(e.instance)return this;if(!o)throw new Error("Page Id is required!");this.storage=new D,this.sessionData=this.storage.get("mc_pixel_session_data");let t=null;try{t=JSON.parse(JSON.stringify(this.sessionData))}catch{}let r=new URL(window.location.href).searchParams.get("mcp_token"),i=r&&!Q(r)&&this.sessionData?.token!==r;if(!this.sessionData||this.pageId!==o||i){let n=this.sessionId,a=this.pageId;this.updateSessionData(j(o,r)),S("Pixel init, new session:",{...this.sessionData}),this.fireEvent(_,"new_pixel_session",{__old_session_data:t,__new_session_data:this.sessionData,__old_session_id:n,__new_session_id:this.sessionId,__old_page_id:a,__new_page_id:o,__has_new_valid_token:i,__has_local_storage:!!window.localStorage,__has_crypto:window.crypto&&window.crypto.getRandomValues,__guid:R(),__timestamp:Date.now(),__version:"1.0"}),i&&this.fireEvent(_,G.AUTH_EVENT,null,{sessionData:{token:r}})}else S("Pixel init, continue session:",{...this.sessionData});e.instance=this}get sessionId(){return this.sessionData&&this.sessionData.sessionId}get pageId(){return this.sessionData&&this.sessionData.pageId}get accountId(){return Number(this.pageId)}get hasOptedIn(){return this.sessionData.hasOptedIn}set hasOptedIn(o){this.hasOptedIn!==o&&this.updateSessionData({...this.sessionData,hasOptedIn:o})}get token(){let o=this.sessionData.token;return typeof o=="string"?o.split("?")[0]:o}},U=e=>`${N()}/pixel/${e}`,Q=e=>{if(!e)return!0;let o=atob(e.split(".")[0]),t=JSON.parse(o).exp;return Date.now()/1e3>t};(function(){let o=window?.mcwidget?.pageId;window.MC_PIXEL=new y(o)})();})();
/*! Bundled license information:

js-sha1/src/sha1.js:
  (*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)
*/
